<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="view_product_categ_form_inuka" model="ir.ui.view">
        <field name="name">product.categ.form.inuka.view</field>
        <field name="model">product.category</field>
        <field name="inherit_id" ref="product.product_category_form_view"/>
        <field name="arch" type="xml">
            <xpath expr="//sheet/group[1]" position="replace">
                <group>
                    <group name="first">
                        <field name="parent_id" class="oe_inline"/>
                    </group>
                    <group>
                        <field name="category_pv" required="1"/>
                    </group>
                </group>
            </xpath>
        </field>
    </record>

	<record id="view_sale_form_inuka_inherit" model="ir.ui.view">
        <field name="name">sale.form.inuka.view</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">
            <button name="action_view_invoice" position="after">
                <button name="dummy_redirect" type="object" class="oe_stat_button disabled" icon="fa-pencil-square-o">
                    <div class="o_field_widget o_stat_info">
                        <span class="o_stat_value"><field name="reserve" widget='monetary'/></span>
                        <span class="o_stat_text">Available Funds</span>
                    </div>
                </button>
            </button>
            <xpath expr="//field[@name='payment_term_id']" position="after">
                <field name="pv" required="True"/>
            </xpath>
            <xpath expr="//sheet/group" position="after">
                <group>
                    <group>
                        <field name="order_sent_by" required="True"/>
                        <field name="sale_date" required="True"/>
                        <field name="order_type" required="True"/>
                    </group>
                    <group>
                        <field name="order_total" required="True"/>
                        <field name="product_cost"/>
                        <field name="shipping_cost"/>
                    </group>
                </group>
            </xpath>
            <xpath expr="//notebook/page[1]/field[@name='order_line']/tree/field[@name='qty_to_invoice']" position="after">
                <field name="pv" string="PV's" readonly="1" force_save="1"/>
            </xpath>
            <xpath expr="//field[@name='amount_total']" position="after">
                <label for="total_pv" string="Total PV's" style="color: red;"/>
                <div>
                    <field name="total_pv" style="color: red;"/>
                </div>
            </xpath>
        </field>
    </record>

    <record id="sale_management.sale_order_view_form" model="ir.ui.view">
        <field name="name">sale.order.form</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">
            <xpath expr="//group[@name='sale_pay']/field[@name='invoice_status']" position="attributes">
                <attribute name="invisible" eval="False"/>
            </xpath>
            <xpath expr="//button[@name='action_quotation_send']" position="before">
                <button name="%(sale.action_view_sale_advance_payment_inv)d" string="Create Invoice"
                    type="action" class="btn-primary"
                    attrs="{'invisible': [('invoice_status', '!=', 'to invoice')]}"/>
                <button name="%(sale.action_view_sale_advance_payment_inv)d" string="Create Invoice"
                    type="action"
                    attrs="{'invisible': ['|',('invoice_status', '!=', 'no'), ('state', '!=', 'sale')]}"/>
            </xpath>
        </field>
    </record>

</odoo>
